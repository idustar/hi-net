webpackJsonp([19],{1086:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.getPostsByUser=e.deleteLike=e.addLike=e.deleteComment=e.addComment=e.getComments=e.deletePost=e.updatePost=e.addPost=e.getPost=e.getAllPosts=void 0;var r=n(118),u=a(r),s=n(291),o=a(s),c=(e.getAllPosts=function(){var t=(0,o.default)(u.default.mark(function t(){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.default)(p.communityUrl+"/posts"));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),e.getPost=function(){var t=(0,o.default)(u.default.mark(function t(e){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.default)(p.communityUrl+"/posts/post?postId="+e));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.addPost=function(){var t=(0,o.default)(u.default.mark(function t(e){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.default)(p.communityUrl+"/posts/add",{method:"POST",body:e}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.updatePost=function(){var t=(0,o.default)(u.default.mark(function t(e){var n=e.postId,a=e.params;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.default)(p.communityUrl+"/posts/post?post_id="+n,{method:"POST",body:a}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.deletePost=function(){var t=(0,o.default)(u.default.mark(function t(e){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.default)(p.communityUrl+"/posts/post?postId="+e,{method:"DELETE"}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.getComments=function(){var t=(0,o.default)(u.default.mark(function t(e){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.default)(p.communityUrl+"/posts/comment?postId="+e));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.addComment=function(){var t=(0,o.default)(u.default.mark(function t(e){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.default)(p.communityUrl+"/posts/comment/add",{method:"POST",body:e}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.deleteComment=function(){var t=(0,o.default)(u.default.mark(function t(e){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.default)(p.communityUrl+"/posts/comment?postId="+e,{method:"DELETE"}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.addLike=function(){var t=(0,o.default)(u.default.mark(function t(e){var n=e.postId,a=e.userId;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.default)(p.communityUrl+"/posts/comment?postId="+n+"&userId="+a,{method:"POST"}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.deleteLike=function(){var t=(0,o.default)(u.default.mark(function t(e){var n=e.postId,a=e.userId;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.default)(p.communityUrl+"/posts/comment?postId="+n+"&userId="+a,{method:"DELETE"}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.getPostsByUser=function(){var t=(0,o.default)(u.default.mark(function t(e){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.default)(p.communityUrl+"/user/posts?userId="+e));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),n(299),n(292)),d=a(c),p=n(298)},695:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),u=a(r),s=n(286),o=a(s),c=n(118),d=a(c);n(287);var p=n(1086);e.default={namespace:"post",state:{list:[],item:{},loading:!0,commentLoading:!0,comments:[]},effects:{fetchList:d.default.mark(function t(e,n){var a,r=e.payload,u=n.call,s=n.put;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s({type:"changeLoading",payload:!0});case 2:return t.next=4,u(p.getAllPosts,r);case 4:if(a=t.sent,!Array.isArray(a)){t.next=10;break}return t.next=8,s({type:"saveList",payload:a});case 8:t.next=11;break;case 10:o.default.error({message:"get posts failed!"});case 11:return t.next=13,s({type:"changeLoading",payload:!1});case 13:case"end":return t.stop()}},t,this)}),fetchUserList:d.default.mark(function t(e,n){var a,r=e.payload,u=n.call,s=n.put;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s({type:"changeLoading",payload:!0});case 2:return t.next=4,u(p.getPostsByUser,r);case 4:if(a=t.sent,!Array.isArray(a)){t.next=10;break}return t.next=8,s({type:"saveList",payload:a});case 8:t.next=11;break;case 10:o.default.error({message:"get posts failed!"});case 11:return t.next=13,s({type:"changeLoading",payload:!1});case 13:case"end":return t.stop()}},t,this)}),fetch:d.default.mark(function t(e,n){var a,r=e.payload,u=n.call,s=n.put;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s({type:"changeLoading",payload:!0});case 2:return t.next=4,u(p.getPost,r);case 4:if(a=t.sent,!a.postId){t.next=10;break}return t.next=8,s({type:"save",payload:a});case 8:t.next=11;break;case 10:o.default.error({message:"get post failed!"});case 11:return t.next=13,s({type:"changeLoading",payload:!1});case 13:case"end":return t.stop()}},t,this)}),add:d.default.mark(function t(e,n){var a,r=e.payload,u=n.call,s=n.put;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s({type:"changeLoading",payload:!0});case 2:return t.next=4,u(p.addPost,r);case 4:return a=t.sent,t.next=7,s({type:"changeLoading",payload:!1});case 7:case"end":return t.stop()}},t,this)}),put:d.default.mark(function t(e,n){var a,r,u=e.payload,s=n.call,o=n.put;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.postId,r=u.params,t.next=3,o({type:"changeLoading",payload:!0});case 3:return t.next=5,s(p.updatePost,{postId:a,params:r});case 5:return t.next=7,o({type:"changeLoading",payload:!1});case 7:case"end":return t.stop()}},t,this)}),remove:d.default.mark(function t(e,n){var a=e.payload,r=n.call,u=n.put;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u({type:"changeLoading",payload:!0});case 2:return t.next=4,r(p.deletePost,a);case 4:return t.next=6,u({type:"changeLoading",payload:!1});case 6:case"end":return t.stop()}},t,this)}),fetchComments:d.default.mark(function t(e,n){var a,r=e.payload,u=n.call,s=n.put;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s({type:"changeCommentLoading",payload:!0});case 2:return t.next=4,u(p.getComments,r);case 4:if(a=t.sent,!Array.isArray(a)){t.next=10;break}return t.next=8,s({type:"saveComments",payload:a});case 8:t.next=11;break;case 10:o.default.error({message:"get comments failed!"});case 11:return t.next=13,s({type:"changeCommentLoading",payload:!1});case 13:case"end":return t.stop()}},t,this)}),addComment:d.default.mark(function t(e,n){var a,r=e.payload,u=n.call,s=n.put;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s({type:"changeCommentLoading",payload:!0});case 2:return t.next=4,u(p.addComment,r);case 4:return a=t.sent,t.next=7,s({type:"changeCommentLoading",payload:!1});case 7:case"end":return t.stop()}},t,this)})},reducers:{saveList:function(t,e){return(0,u.default)({},t,{list:e.payload})},saveComments:function(t,e){return(0,u.default)({},t,{comments:e.payload})},save:function(t,e){return(0,u.default)({},t,{item:e.payload})},changeLoading:function(t,e){return(0,u.default)({},t,{loading:e.payload})},changeCommentLoading:function(t,e){return(0,u.default)({},t,{commentLoading:e.payload})}}},t.exports=e.default}});